{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","trList","querySelectorAll","headList","children","selectHTML","secondClickTh","reverseSort","previousActive","createInput","type","td","innerHTML","element","createElement","classList","add","value","innerText","append","addEventListener","ev","target","tbody","trListNotTh","headName","textContent","index","findIndex","h","tagName","sort","a","b","A","B","isFinite","includes","replace","Number","localeCompare","tr","closest","remove","className","pushNotification","title","description","div","insertAdjacentHTML","body","setTimeout","checkInput","input","length","toLocaleString","eDbl","matches","tdInnerText","find","el","tE","tdIndex","e","blurFocus","eKey","code","removeEventListener","form","forms","eSubmit","inputName","name","position","office","age","salary","preventDefault","salaryToString","reset"],"mappings":"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","file":"main.0cdb100c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// write code here\nconst table = document.querySelector('table');\nlet trList = [...table.querySelectorAll('tr')];\nconst headList = [...trList[0].children];\nconst selectHTML = `\n  <select name=\"office\" data-qa=\"office\" required>\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\">Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>\n  </select>`;\n\nlet secondClickTh = '';\nlet reverseSort = -1;\nlet previousActive = '';\n\ntable.addEventListener('click', ev => {\n  const element = ev.target;\n  const tbody = table.querySelector('tbody');\n  const trListNotTh = [...table.querySelectorAll('tbody tr')];\n\n  const headName = element.textContent;\n  const index = headList.findIndex(h => h.innerText === headName);\n\n  if (element.tagName === 'TH') {\n    if (element !== secondClickTh) {\n      secondClickTh = element;\n      reverseSort = 1;\n    } else {\n      secondClickTh = '';\n      reverseSort = -1;\n    }\n\n    trListNotTh.sort((a, b) => {\n      let A = [...a.children][index].innerText;\n      let B = [...b.children][index].innerText;\n\n      if (A.includes('$')) {\n        A = A.replace(/[^0-9]/g, '');\n        B = B.replace(/[^0-9]/g, '');\n      }\n\n      if (isFinite(A)) {\n        return (Number(A) - Number(B)) * reverseSort;\n      } else {\n        return A.localeCompare(B) * reverseSort;\n      }\n    });\n\n    tbody.append(...trListNotTh);\n  } else if (element.tagName === 'TD') {\n    const tr = element.closest('tr');\n\n    if (tr !== previousActive && previousActive) {\n      previousActive.classList.remove('active');\n    }\n    tr.className = 'active';\n    previousActive = tr;\n  }\n});\n\nfunction createInput(type, td, innerHTML = '') {\n  const element = document.createElement(type);\n\n  element.innerHTML = innerHTML;\n  element.classList.add('cell-input');\n  element.value = td.innerText;\n  td.innerText = '';\n  td.append(element);\n\n  return element;\n}\n\nconst pushNotification = (title, description, type) => {\n  const div = document.createElement('div');\n\n  div.className = 'notification ' + type;\n\n  div.insertAdjacentHTML('afterbegin', `\n  <h1 class=\"title\" data-qa=\"notification\">${title}</h1>\n    <p>${description}</p>\n  `);\n\n  document.body.append(div);\n\n  setTimeout(() => {\n    div.remove();\n  }, 3000);\n};\n\nfunction checkInput(input, index) {\n  switch (index) {\n    case 0:\n      if (input.value.length < 4) {\n        pushNotification('Error', 'Name field must have more letters', 'error');\n\n        return false;\n      }\n      break;\n\n    case 3:\n      if (input.value < 18 || input.value > 90) {\n        pushNotification(\n          'Error',\n          'Age must be more than 18 and less than 90',\n          'error');\n\n        return false;\n      }\n      break;\n\n    case 4:\n      if (input.value && isFinite(input.value)) {\n        input.value = '$' + Number(input.value).toLocaleString('en-US');\n\n        return true;\n      } else {\n        pushNotification('Error',\n          'Salary field must have only numbers', 'error');\n\n        return false;\n      }\n  }\n\n  return true;\n}\n\ntable.addEventListener('dblclick', eDbl => {\n  trList = [...table.querySelectorAll('tr')];\n\n  if (eDbl.target.matches('td')) {\n    const td = eDbl.target;\n    const tdInnerText = td.innerText;\n\n    const tr = trList.find(el =>\n      [...el.children].find(tE => tdInnerText === tE.innerText));\n    const tdIndex = [...tr.children].findIndex(e =>\n      e.innerText === tdInnerText);\n\n    let input;\n\n    switch (tdIndex) {\n      case 2:\n        input = createInput('select', td, selectHTML);\n        break;\n      case 3:\n        input = createInput('input', td);\n        input.type = 'number';\n        break;\n      case 4:\n        input = createInput('input', td);\n        input.value = input.value.replace(/[^0-9]/g, '');\n        break;\n      default:\n        input = createInput('input', td);\n        break;\n    }\n\n    const blurFocus = () => {\n      if (checkInput(input, tdIndex)) {\n        td.innerText = input.value;\n      } else {\n        td.innerText = tdInnerText;\n      }\n\n      input.remove();\n    };\n\n    const enterPress = (eKey) => {\n      if (eKey.code === 'Enter') {\n        input.removeEventListener('blur', blurFocus);\n\n        if (checkInput(input, tdIndex)) {\n          td.innerText = input.value;\n        } else {\n          td.innerText = tdInnerText;\n        }\n\n        input.remove();\n      }\n    };\n\n    input.addEventListener('blur', blurFocus);\n    input.addEventListener('keydown', enterPress);\n  }\n});\n\ndocument.body.insertAdjacentHTML('beforeend',\n  `<form class=\"new-employee-form\" action=\"/\" method=\"GET\">\n    <label>Name:\n      <input name=\"name\" data-qa=\"name\" type=\"text\" required>\n    </label>\n    <label>Position:\n      <input name=\"position\" data-qa=\"position\" type=\"text\" required>\n    </label>\n    <label>Office:\n      ${selectHTML}\n    </label>\n    <label>Age:\n      <input name=\"age\" data-qa=\"age\" type=\"number\" required>\n    </label>\n    <label>Salary:\n      <input name=\"salary\" data-qa=\"salary\" type=\"number\" required>\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>`);\n\nconst form = document.forms[0];\n\nform.addEventListener('submit', eSubmit => {\n  const tbody = document.querySelector('tbody');\n  const inputName = form.name;\n  const position = form.position;\n  const office = form.office;\n  const age = form.age;\n  const salary = form.salary;\n\n  let error = true;\n\n  eSubmit.preventDefault();\n\n  if (!checkInput(inputName, 0)) {\n    error = true;\n  } else if (!checkInput(age, 3)) {\n    error = true;\n  } else {\n    error = false;\n  }\n\n  if (!error) {\n    const tr = document.createElement('tr');\n    const salaryToString = '$' + Number(salary.value).toLocaleString('en-US');\n\n    tr.insertAdjacentHTML('afterbegin', `\n      <td>${inputName.value}</td>\n      <td>${position.value}</td>\n      <td>${office.value}</td>\n      <td>${age.value}</td>\n      <td>${salaryToString}</td>\n    `);\n\n    pushNotification('Success', 'New field was successide add', 'success');\n    tbody.append(tr);\n\n    form.reset();\n  }\n});\n"]}